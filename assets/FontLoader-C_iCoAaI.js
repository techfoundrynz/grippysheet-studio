import{L as m,F,S as T}from"./index-gTeW-EoH.js";class C extends m{constructor(t){super(t)}load(t,e,o,h){const i=this,n=new F(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,function(a){const c=i.parse(JSON.parse(a));e&&e(c)},o,h)}parse(t){return new k(t)}}class k{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100,o="ltr"){const h=[],i=w(t,e,this.data,o);for(let n=0,a=i.length;n<a;n++)h.push(...i[n].toShapes());return h}}function w(d,t,e,o){const h=Array.from(d),i=t/e.resolution,n=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*i,a=[];let c=0,p=0;(o=="rtl"||o=="tb")&&h.reverse();for(let u=0;u<h.length;u++){const l=h[u];if(l===`
`)c=0,p-=n;else{const y=S(l,i,c,p,e);o=="tb"?(c=0,p+=e.ascender*i):c+=y.offsetX,a.push(y.path)}}return a}function S(d,t,e,o,h){const i=h.glyphs[d]||h.glyphs["?"];if(!i){console.error('THREE.Font: character "'+d+'" does not exists in font family '+h.familyName+".");return}const n=new T;let a,c,p,u,l,y,g,b;if(i.o){const r=i._cachedOutline||(i._cachedOutline=i.o.split(" "));for(let s=0,x=r.length;s<x;)switch(r[s++]){case"m":a=r[s++]*t+e,c=r[s++]*t+o,n.moveTo(a,c);break;case"l":a=r[s++]*t+e,c=r[s++]*t+o,n.lineTo(a,c);break;case"q":p=r[s++]*t+e,u=r[s++]*t+o,l=r[s++]*t+e,y=r[s++]*t+o,n.quadraticCurveTo(l,y,p,u);break;case"b":p=r[s++]*t+e,u=r[s++]*t+o,l=r[s++]*t+e,y=r[s++]*t+o,g=r[s++]*t+e,b=r[s++]*t+o,n.bezierCurveTo(l,y,g,b,p,u);break}}return{offsetX:i.ha*t,path:n}}export{k as Font,C as FontLoader};
